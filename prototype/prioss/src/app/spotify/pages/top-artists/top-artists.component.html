@if (previewMode()) {
  <div
    echarts
    [options]="chartOptions()"
    class="chart">
  </div>
} @else {
  <app-title-bar
    titleText="Top Artists"
    tooltipText="This bar chart shows your top 10 artists in a given time period. You can also switch to a tabular view."
  />

  <nz-range-picker
    ngModel
    [ngModel]="dateRange()"
    (nzOnCalendarChange)="onDateRangeChanged($event)"
  />

  <nz-tabset>
    <nz-tab nzTitle="Bar chart">
      <div
        echarts
        class="chart"
        [options]="chartOptions()"
        (chartClick)="selectArtist($event)">
      </div>
    </nz-tab>

    <nz-tab nzTitle="Table">
      <nz-table
        #basicTable
        [nzData]="topArtists()">
        <thead>
        <tr>
          <th>Artist</th>
          <th>Minutes listened</th>
        </tr>
        </thead>
        <tbody>
          @for (data of basicTable.data; track data[0]) {
            <tr class="clickable" (click)="selectArtist(data[0])">
              <td>{{ data[0] }}</td>
              <td>{{ data[1] | time:'number-as-minutes' }}</td>
            </tr>
          }
        </tbody>
      </nz-table>
    </nz-tab>
  </nz-tabset>
}
