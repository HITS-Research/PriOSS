<div [ngClass]="{'component-page': !previewMode}">
    <!--only shows when visiting the page-->
    <div *ngIf="!previewMode">
        <!--Titlebar component -->
        <app-title-bar titleText="Highlights" tooltipText="This are some important entrys in your data download regarding your followers or following relations."></app-title-bar>
    </div>
    <!--This is the preview and the highlights section-->
    <div>
        <nz-row [nzGutter]="16">
            <nz-col [nzSpan]="12">
                <nz-statistic [nzValue]="(followerInfo.length|number)!"
                    [nzTitle]="'Number of followers'"></nz-statistic>
            </nz-col>
            <nz-col [nzSpan]="12">
                <nz-statistic [nzValue]="(followingInfo.length| number)!"
                    [nzTitle]="'Number of following accounts'"></nz-statistic>
            </nz-col>
        </nz-row>
        <nz-row [nzGutter]="16">
            <nz-col [nzSpan]="12">
                <nz-statistic [nzValue]="(blockedInfo.length | number)!"
                    [nzTitle]="'Number of blocked accounts'"></nz-statistic>
            </nz-col>
            <nz-col [nzSpan]="12">
                <nz-statistic [nzValue]="(recentFollowInfo.length| number)!" 
                    [nzTitle]="'Number of recent follow requests'"></nz-statistic>
            </nz-col>
        </nz-row>
        <div [class.hidden]="previewMode">
            <nz-row [nzGutter]="16">
                <nz-col [nzSpan]="12">
                    <nz-statistic [nzValue]="(receivedFollowRequestInfo.length | number)!"
                        [nzTitle]="'Number of received follow request'"></nz-statistic>
                </nz-col>
                <nz-col [nzSpan]="12">
                    <nz-statistic [nzValue]="(pendingFollowRequestInfo.length| number)!" 
                        [nzTitle]="'Number of pending follow requests'"></nz-statistic>
                </nz-col>
            </nz-row>
            <nz-row [nzGutter]="16">
                <nz-col [nzSpan]="12">
                    <nz-statistic [nzValue]="(removedSuggestionInfo.length | number)!"
                        [nzTitle]="'Number of removed suggestions'"></nz-statistic>
                </nz-col>
                <nz-col [nzSpan]="12">
                    <nz-statistic [nzValue]="(recentlyUnfollowedAccountInfo.length| number)!" 
                        [nzTitle]="'Number of recently unfollowed accounts'"></nz-statistic>
                </nz-col>
            </nz-row>
        </div>
    </div>
    <div [class.hidden]="previewMode">
        <br>
        <app-title-bar titleText="Followers and Following" [includeButton]="false"></app-title-bar>
        <nz-card style="width:100%;">
            <nz-tabset nzType="card">
                <nz-tab nzTitle="Graph representation" (nzSelect)="on_graph_page_enter()">
                    <p nz-typography>
                        The following graph visualizes all follower or following relations with you. You can grab the
                        nodes and move them arround.</p>

                    <strong>Relations: </strong>
                    <nz-tag *ngFor="let tag of graphOptions" nzMode="checkable"
                        [nzChecked]="selectedTags.indexOf(tag) > -1" (nzCheckedChange)="handleChange($event, tag)">
                        {{ tag }}
                    </nz-tag>
                    <div id="cy"></div>
                </nz-tab>
                <nz-tab nzTitle="Follower List"><ng-template nz-tab><nz-demo-tab-content-lazy>
                            <!-- If Follower Data present -->
                            <div *ngIf="followerInfo?.length">
                                <nz-table [nzData]="followerInfo" [nzPageSize]="pageSize"
                                    [nzPageIndex]="currentFollowerPage"
                                    (nzPageIndexChange)="on_follower_page_change($event)">
                                    <thead>
                                        <tr>
                                            <th>Follower name</th>
                                            <th>Timestamp since this user follows you</th>
                                            <th>Followers Profile URL</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let follower_info of sliced_follower_data">
                                            <td>{{ follower_info.instaAccountName }}</td>
                                            <td>{{ follower_info.timestamp + '000' | date: 'd MMM y, h:mm a' }}</td>
                                            <td><span nz-icon nzType="link"><a target="_blank"
                                                        href={{follower_info.instaProfileURL}}>{{follower_info.instaAccountName}}</a></span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </nz-table>
                            </div>
                            <!-- If No Follower Data present -->
                            <div *ngIf="followerInfo?.length === 0">
                                <nz-empty nzNotFoundImage="simple"></nz-empty>
                            </div>
                        </nz-demo-tab-content-lazy></ng-template></nz-tab>
                <nz-tab nzTitle="Following List"><ng-template nz-tab><nz-demo-tab-content-lazy>
                            <!-- If Following Data present -->
                            <div *ngIf="followingInfo?.length">
                                <nz-table [nzData]="followingInfo" [nzPageSize]="pageSize"
                                    [nzPageIndex]="currentFollowingPage"
                                    (nzPageIndexChange)="on_following_page_change($event)">
                                    <thead>
                                        <tr>
                                            <th>Following name</th>
                                            <th>Timestamp since you follow this user</th>
                                            <th>Following Profile URL</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let following_info of sliced_following_data">
                                            <td>{{ following_info.instaAccountName }}</td>
                                            <td>{{ following_info.timestamp + '000' | date: 'd MMM y, h:mm a' }}</td>
                                            <td><span nz-icon nzType="link"><a target="_blank"
                                                        href={{following_info.instaProfileURL}}>{{following_info.instaAccountName}}</a></span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </nz-table>
                            </div>
                            <!-- If No Follower Data present -->
                            <div *ngIf="followingInfo?.length === 0">
                                <nz-empty nzNotFoundImage="simple"></nz-empty>
                            </div>
                        </nz-demo-tab-content-lazy></ng-template></nz-tab>
            </nz-tabset>
        </nz-card>
        <br>
        <br>

        <app-title-bar titleText="Request Data" [includeButton]="false"></app-title-bar>
        <nz-card style="width:100%;">
            <nz-tabset nzType="card">
                <nz-tab nzTitle="Recent Follow Requests">
                    <!-- If Recent Follow Data present -->
                    <div *ngIf="recentFollowInfo?.length">
                        <nz-table [nzData]="recentFollowInfo" [nzPageSize]="pageSize" [nzPageIndex]="currentRecentFollowPage"
                            (nzPageIndexChange)="on_recent_follow_page_change($event)">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Timestamp of the follow request</th>
                                    <th>Profile URL</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let recent_info of sliced_recent_follow_data">
                                    <td>{{ recent_info.instaAccountName }}</td>
                                    <td>{{ recent_info.timestamp }}</td>
                                    <td><span nz-icon nzType="link"><a target="_blank"
                                                href={{recent_info.instaProfileURL}}>{{recent_info.instaAccountName}}</a></span>
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>
                    <!-- If No Recent Follow Data present -->
                    <div *ngIf="recentFollowInfo?.length === 0">
                        <nz-empty nzNotFoundImage="simple"></nz-empty>
                    </div>
                </nz-tab>
                <nz-tab nzTitle="Pending Follow Requests"><ng-template nz-tab><nz-demo-tab-content-lazy>
                    <!-- If Pending Follow Request Data present -->
                    <div *ngIf="pendingFollowRequestInfo?.length">
                        <nz-table [nzData]="pendingFollowRequestInfo" [nzPageSize]="pageSize" [nzPageIndex]="currentPendingFollowRequestPage"
                            (nzPageIndexChange)="on_pending_follow_request_page_change($event)">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Timestamp of the pending follow request</th>
                                    <th>Profile URL</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let pending_info of sliced_pending_follow_request_data">
                                    <td>{{ pending_info.instaAccountName }}</td>
                                    <td>{{ pending_info.timestamp }}</td>
                                    <td><span nz-icon nzType="link"><a target="_blank"
                                                href={{pending_info.instaProfileURL}}>{{pending_info.instaAccountName}}</a></span>
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>
                    <!-- If No Pending Follow Request Data present -->
                    <div *ngIf="pendingFollowRequestInfo?.length === 0">
                        <nz-empty nzNotFoundImage="simple"></nz-empty>
                    </div>
                </nz-demo-tab-content-lazy></ng-template></nz-tab>
                <nz-tab nzTitle="Received Follow Requests"><ng-template nz-tab><nz-demo-tab-content-lazy>
                    <!-- If Received Follow Requests Data present -->
                    <div *ngIf="receivedFollowRequestInfo?.length">
                        <nz-table [nzData]="receivedFollowRequestInfo" [nzPageSize]="pageSize" [nzPageIndex]="currentReceivedFollowRequestPage"
                            (nzPageIndexChange)="on_received_follow_request_page_change($event)">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Timestamp of the request</th>
                                    <th>Profile URL</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let request_info of sliced_received_follow_request_data">
                                    <td>{{ request_info.instaAccountName }}</td>
                                    <td>{{ request_info.timestamp }}</td>
                                    <td><span nz-icon nzType="link"><a target="_blank"
                                                href={{request_info.instaProfileURL}}>{{request_info.instaAccountName}}</a></span>
                                    </td>
                                </tr>
                            </tbody>
                        </nz-table>
                    </div>
                    <!-- If No Received Follow Requests Data present -->
                    <div *ngIf="receivedFollowRequestInfo?.length === 0">
                        <nz-empty nzNotFoundImage="simple"></nz-empty>
                    </div>
                </nz-demo-tab-content-lazy></ng-template></nz-tab>
            </nz-tabset>
        </nz-card>
        <br><br>

        <app-title-bar titleText="Blocked Accounts" [includeButton]="false"></app-title-bar>
        <!-- If Blocked Data present -->
        <div *ngIf="blockedInfo?.length">
            <nz-table [nzData]="blockedInfo" [nzPageSize]="pageSize" [nzPageIndex]="currentBlockedPage"
                (nzPageIndexChange)="on_blocked_page_change($event)">
                <thead>
                    <tr>
                        <th>Blocked username</th>
                        <th>Timestamp since this user is blocked</th>
                        <th>Blocked users Profile URL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let blocked_info of sliced_blocked_data">
                        <td>{{ blocked_info.instaAccountName }}</td>
                        <td>{{ blocked_info.timestamp + '000' | date: 'd MMM y, h:mm a' }}</td>
                        <td><span nz-icon nzType="link"><a target="_blank"
                                    href={{blocked_info.instaProfileURL}}>{{blocked_info.instaAccountName}}</a></span>
                        </td>
                    </tr>
                </tbody>
            </nz-table>
        </div>
        <!-- If No Blocked Data present -->
        <div *ngIf="blockedInfo?.length === 0">
            <nz-card><nz-empty nzNotFoundImage="simple"></nz-empty></nz-card>
        </div>

        <app-title-bar titleText="Recently Unfollowed Accounts" [includeButton]="false"></app-title-bar>
        <!-- If Recently Unfollowed Accounts Data present -->
        <div *ngIf="recentlyUnfollowedAccountInfo?.length">
            <nz-table [nzData]="recentlyUnfollowedAccountInfo" [nzPageSize]="pageSize" [nzPageIndex]="currentRecentlyUnfollowedAccountsPage"
                (nzPageIndexChange)="on_recently_unfollowed_account_page_change($event)">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Timestamp of unfollow</th>
                        <th>Profile URL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let unfollow_info of sliced_recently_unfollowed_account_data">
                        <td>{{ unfollow_info.instaAccountName }}</td>
                        <td>{{ unfollow_info.timestamp }}</td>
                        <td><span nz-icon nzType="link"><a target="_blank"
                                    href={{unfollow_info.instaProfileURL}}>{{unfollow_info.instaAccountName}}</a></span>
                        </td>
                    </tr>
                </tbody>
            </nz-table>
        </div>
        <!-- If No Recently Unfollowed Account Data present -->
        <div *ngIf="recentlyUnfollowedAccountInfo?.length === 0">
            <nz-card><nz-empty nzNotFoundImage="simple"></nz-empty></nz-card>
        </div>
        <br>
        <br>
        <app-title-bar titleText="Removed Suggestions" [includeButton]="false"></app-title-bar>
        <!-- If Removed Suggestions Data present -->
        <div *ngIf="removedSuggestionInfo?.length">
            <nz-table [nzData]="removedSuggestionInfo" [nzPageSize]="pageSize" [nzPageIndex]="currentRemovedSuggestionPage"
                (nzPageIndexChange)="on_removed_suggestion_page_change($event)">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Timestamp of the removing</th>
                        <th>Profile URL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let removed_info of sliced_removed_suggestion_data">
                        <td>{{ removed_info.instaAccountName }}</td>
                        <td>{{ removed_info.timestamp }}</td>
                        <td><span nz-icon nzType="link"><a target="_blank"
                                    href={{removed_info.instaProfileURL}}>{{removed_info.instaAccountName}}</a></span>
                        </td>
                    </tr>
                </tbody>
            </nz-table>
        </div>
        <!-- If No Removed Suggestion Data present -->
        <div *ngIf="removedSuggestionInfo?.length === 0">
            <nz-card><nz-empty nzNotFoundImage="simple"></nz-empty></nz-card>
        </div>
    </div>
</div>