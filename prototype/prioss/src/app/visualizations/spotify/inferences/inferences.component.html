<div [ngClass]="{'component-page': !previewMode}">
  <div *ngIf="previewMode">
    <nz-table #nzTable [nzData]="listOfInferences.slice(0,8)" nzTableLayout="fixed" [nzShowPagination]="false">
      <tbody>
        <tr *ngFor="let inference of nzTable.data">
          <td>{{ inference.inference }}</td>
        </tr>
      </tbody>
    </nz-table>
  </div>
  <div *ngIf="!previewMode">
    <!-- https://stackoverflow.com/questions/73631070/how-to-set-scrollable-content-dinamically-in-ng-zorro-table -->
    <h1 style="position: relative;">Inferences<span nz-tooltip nzTooltipTitle="Generally, inferences are used for marketing or advertising. Spotify also uses inference data to curate and create content. 1P_inferences are made by Spotify. 3p_inferences are made by Facebook."><span nz-icon nzType="info-circle" nzTheme="outline" style="position: absolute; top: 0; right: -600; font-size: 16px;"></span></span> </h1>
    <nz-table #rowSelectionTable [nzData]="listOfInferences" [nzPageSize]="50000" [nzFooter]="footerTemplate"
      [nzScroll]="{ y: 'calc(100vh - 369px)' }" [nzShowPagination]="false">
      <thead>
        <tr>
          <th nzWidth="5%" [(nzChecked)]="checked" [nzIndeterminate]="indeterminate"
            (nzCheckedChange)="onAllChecked($event)"></th>
          <th nzWidth="90%">
            <nz-input-group [nzSuffix]="suffixIconSearch">
              <input type="text" #searchText nz-input placeholder="Search your inferences"
                (keyup)="search(searchText.value)" />
              <ng-template #suffixIconSearch>
                <button nz-button nzType="text" (click)="reset()"><span nz-icon nzType="close"></span></button>
              </ng-template>
            </nz-input-group>
          </th>
          <th nzWidth="5%">
            <span nz-tooltip nzTooltipTitle="Create an rectification email with all selected inferences."><button nz-button nzType="default" nzSize="large" [disabled]="setOfCheckedId.size === 0"
              (click)="rectifyInferences()"><span nz-icon nzType="delete"></span></button></span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of rowSelectionTable.data">
          <td [nzChecked]="setOfCheckedId.has(data.id)" (nzCheckedChange)="onItemChecked(data.id, $event)"></td>
          <td>{{ data.inference }}</td>
          <td></td>
        </tr>
      </tbody>
      <ng-template #footerTemplate>
            <tfoot>{{setOfCheckedId.size}}/{{rowSelectionTable.nzData.length}}</tfoot>
      </ng-template>
    </nz-table>
  </div>
</div>