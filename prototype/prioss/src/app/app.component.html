<nz-layout>
  <jeep-sqlite *ngIf="isWeb"></jeep-sqlite>
  <app-notification></app-notification>
  <!--defines a collapsable slider with a logo-->
  <nz-sider 
            nzCollapsible
            nzWidth="256px"
            [nzCollapsedWidth]="collapseWidth"
            nzBreakpoint="md"
            [(nzCollapsed)]="isCollapsed"
            [nzTrigger]="null">
    <div class="menu-sidebar">        
      <div class="sidebar-logo">
        <a routerLink="/">
          <img src="/assets/images/icons/prioss_icon_borderless.png" alt="logo">
          <h1>PriOSS</h1>
        </a>
      </div>
      <!--adding menu items-->
      <ul class="menu-items-list" nz-menu nzTheme="light" nzMode="inline" [nzInlineCollapsed]="isCollapsed">
        <li class="navigation-list" nz-menu-item nzMatchRouter>
          <a tabindex="0" id="tabstarter" routerLink="/home">
            <span nz-icon nzType="home" nzTheme="outline"></span>
            <span>Home</span>
          </a>
        </li>
        <li class="navigation-list" nz-menu-item nzMatchRouter>
          <a tabindex="0" id="tabstarter" routerLink="/about">
            <span nz-icon nzType="info-circle" nzTheme="outline"></span>
            <span>About</span>
          </a>
        </li>
        <li class="navigation-list" nz-menu-item nzMatchRouter>
          <a tabindex="0" id="tabstarter" routerLink="/contact">
            <span nz-icon nzType="form" nzTheme="outline"></span>
            <span>Contact</span>
          </a>
        </li>
        <!--this submenu is only shown when on a dashboard-->
        <li *ngIf="isDashboard" nz-submenu nzTitle="Dashboard" nzIcon="dashboard">
          <ul>
            <li nz-menu-item [nzSelected]="this.isSelected('')">
              <a tabindex="0" (click)="navigateAndScroll(pRouter, serviceName + '/dashboard')">Introduction</a>
            </li>
            <li nz-menu-item [nzSelected]="this.isSelected('#visualization')">
              <a tabindex="0" routerLink="{{serviceName}}/dashboard" fragment="visualization">Visualization</a>
            </li>
            <li nz-menu-item [nzSelected]="this.isSelected('#rectification')">
              <a tabindex="0" routerLink="{{serviceName}}/dashboard" fragment="rectification">Rectification</a>
            </li>
            <li nz-menu-item [nzSelected]="this.isSelected('#recommendation')">
              <a tabindex="0" routerLink="{{serviceName}}/dashboard" fragment="recommendation">Recommendation</a>
            </li>
            <li nz-menu-item [nzSelected]="this.isSelected('#gdpr')">
              <a tabindex="0" routerLink="{{serviceName}}/dashboard" fragment="gdpr">GDPR/Rights</a>
            </li>
            <li nz-menu-item [nzSelected]="this.isSelected('#purpose')">
              <a tabindex="0" routerLink="{{serviceName}}/dashboard" fragment="purpose">Purpose</a>
            </li>
            <li nz-menu-item [nzSelected]="this.isSelected('#faq')">
              <a tabindex="0" routerLink="{{serviceName}}/dashboard" fragment="faq">Frequently asked questions</a>
            </li>
          </ul>
        </li>
        <li class="navigation-list" nz-menu-item nzMatchRouter>
          <a tabindex="0" id="tabstarter" routerLink="/known-issues">
            <span nz-icon nzType="warning" nzTheme="outline"></span>
            <span>Known Issues</span>
          </a>
        </li>
      </ul>
      <div class="navbar-btns-space">
        <div class="navbar-btns-container">
          <!--Share Buttons-->
          <div class="share-btns-vbox" *ngIf="!isCollapsed">
            Like our site? Share it!<br>
            <div class="share-btns-hbox">
              <a class="twitter-share-button" target="_blank"
                href="https://twitter.com/intent/tweet?text=Want%20to%20know%20what%20personal%20info%20Instagram%2C%20Spotify%2C%20Facebook%20and%20the%20like%20have%20collected%20about%20you%3F%20Check%20out%20PriOSS%2C%20your%20Privacy%20One%20Stop%20Shop%3A%20https%3A%2F%2Fprioss.cs.upb.de">
                <span nz-icon nzType="twitter" nzTheme="outline"></span>
              </a>
            </div>  
          </div>
          <br>
          <!--Change Service Button-->
          <!--The && !isCollapsed is placed here instead of inside the typescript calculation of showServiceButton, 
          because antdesign automatically collapses the menu when the horizontal width of the browser window is below a certain threshold.
          this changes isCollapsed but does not trigger a recalculation of showServiceButton.-->
          <button *ngIf="showServiceButton && !isCollapsed" nz-button nzType="default" class="change-service-btn" nzSize="large" (click)="pRouter.navigateByUrl('/serviceSelection')">
            <span nz-icon nzType="arrow-left" nzTheme="outline"></span>
            Change Service
          </button>
        </div>
      </div>
    </div>
  </nz-sider>
  <nz-layout>
    <!--defines the header with the button to collapse the slider-->
    <nz-header>
      <div class="app-header" >
        <span class="header-trigger" 
          (click)="handleNavbarFold()"
          nz-icon
          [nzType]="isCollapsed ? 'menu-unfold' : 'menu-fold'">
        </span>
      </div>
    </nz-header>
    <!--defines the content-->
    <nz-content>
      <div class="inner-content">
        <!--the content of the routed page is shown here-->
        <router-outlet (activate)="setServiceName()"></router-outlet>
      </div>
    </nz-content>
    <!--defines the footer-->
    <nz-footer>PriOSS Â©2023</nz-footer>
  </nz-layout>
</nz-layout>
